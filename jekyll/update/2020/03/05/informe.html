<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Informe práctica | p3-t2-handling-events-b3cl0s3r</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Informe práctica" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Handling events - Chapter 15" />
<meta property="og:description" content="Handling events - Chapter 15" />
<link rel="canonical" href="/p3-t2-handling-events-b3cl0s3r/jekyll/update/2020/03/05/informe.html" />
<meta property="og:url" content="/p3-t2-handling-events-b3cl0s3r/jekyll/update/2020/03/05/informe.html" />
<meta property="og:site_name" content="p3-t2-handling-events-b3cl0s3r" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-05T16:31:07+00:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"/p3-t2-handling-events-b3cl0s3r/jekyll/update/2020/03/05/informe.html","headline":"Informe práctica","dateModified":"2020-03-05T16:31:07+00:00","datePublished":"2020-03-05T16:31:07+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/p3-t2-handling-events-b3cl0s3r/jekyll/update/2020/03/05/informe.html"},"description":"Handling events - Chapter 15","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/p3-t2-handling-events-b3cl0s3r/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/p3-t2-handling-events-b3cl0s3r/feed.xml" title="p3-t2-handling-events-b3cl0s3r" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/p3-t2-handling-events-b3cl0s3r/">p3-t2-handling-events-b3cl0s3r</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/p3-t2-handling-events-b3cl0s3r/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Informe práctica</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-03-05T16:31:07+00:00" itemprop="datePublished">Mar 5, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="handling-events---chapter-15">Handling events - Chapter 15</h2>

<h3 id="handling-events">Handling events</h3>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button&gt;</span>Act-once button<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">function</span> <span class="nx">once</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Done.</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">button</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">once</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">once</span><span class="p">);</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>La función addEventListener permite añadir un handler a un determinado elemento. Lo que hace esto es que el sistema va a estar comprobando
continuamente que una determinada acción ocurre con dicho elemento. En caso de que se de, se dispara una acción.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button&gt;</span>Click me any way you want<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousedown</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Left button</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Middle button</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Right button</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>A las funciones de handler de eventos se les pasa siempre un argumento: el objeto “event”.
Este objeto tiene información sobre el evento, como por ejemplo qué tecla o botón fue la que activó el evento.</p>

<p>La propagación de eventos ocurre de hijo a padres por defecto. Si se quiere evitar que se propague un evento, se puede llamar a
la función stopPropagation() del objeto.</p>

<p>Por ejemplo, en este ejemplo, el click izquierdo activa el evento en el párrafo y en el botón cuando se hace click en el botón.
Sin embargo, el click derecho solo se activa en el botón al hacer click sobre el botón debido a la función stopPropagation().</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>A paragraph with a <span class="nt">&lt;button&gt;</span>button<span class="nt">&lt;/button&gt;</span>.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">let</span> <span class="nx">para</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">p</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">button</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">para</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousedown</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Handler for paragraph.</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousedown</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Handler for button.</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>Asimismo, en event también existe la propiedad ‘target’. Con ella, podemos aplicar acciones en el origen del evento
y así evitar comportamientos no deseados debido a la propagación.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;button&gt;</span>A<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;button&gt;</span>B<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;button&gt;</span>C<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">BUTTON</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Clicked</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>Muchos eventos tienen eventos por defecto. Por ejemplo, si pulsas la flecha hacia abajo, el navegador baja,
si haces click derecho, aparece un menu…</p>

<p>Para la mayoría de eventos, los handlers de Javascript son ejecutados antes que las acciones por defecto. Con
preventDefault() podemos detener los comportamientos por defecto.</p>

<p>Hay que tener en cuenta que no se puede hacer con todo, por motivos de seguridad. Por ejemplo, en Chrome, no se puede detener
un CTRL+W (cerrar una pestaña).</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>This page turns violet when you hold the V key.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">keydown</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">v</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">violet</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">keyup</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">key</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">v</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>Cuando se pulsa una tecla, se recibe el evento keydown. Hay que tener cuidado, porque 
mantener la tecla pulsada dispara varias veces el evento keydown.</p>

<p>Así mismo, cuando se deja de pulsar una tecla, se recibe el evento keyup.</p>

<h3 id="pointer-events">Pointer events</h3>

<p>Existen dos maneras de apuntar a cosas en la pantalla: ratón y pantallas táctiles.</p>

<p>Por un lado, tenemos los eventos “mousedown” y “mouseup” que funcionan de la misma manera que lo hace keydown y keyup.</p>

<p>Sin embargo, cuando se realiza un evento “mouseup”, también se lanza un evento de tipo “click”.</p>

<p>¿La diferencia? Que click abarca desde el inicio del pulso hasta el área en el que se dejó de pulsar y mouseup lanza el evento únicamente y exclusivamente en el punto en el que se soltó el botón del ratón.</p>

<p>Si se realizan dos clicks seguidos, ocurre un evento dblclick.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style&gt;</span>
  <span class="nt">body</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">200px</span><span class="p">;</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">beige</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nc">.dot</span> <span class="p">{</span>
    <span class="nl">height</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span> <span class="nl">width</span><span class="p">:</span> <span class="m">8px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">4px</span><span class="p">;</span> <span class="c">/* rounds corners */</span>
    <span class="nl">background</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">absolute</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">dot</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">dot</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">dot</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">dot</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">dot</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">-</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dot</span><span class="p">);</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p>Función básica para dibujar. Se tiene un listener del evento click que introduce un div con un punto en la última posición en la que se dejó de hacer click.</p>

<p>Básicamente, coloca puntos en la página.</p>

<p><img src="/p3-t2-handling-events-b3cl0s3r/assets/img/captura1.png" alt="image" /></p>

<h3 id="mouse-motion">Mouse motion</h3>

<p>Cada vez que el ratón se mueve, se lanza un evento “mousemove”. Este evento puede ser utilizado
para seguir la posición del ratón. Una situación típica de uso es en programas de dibujo.</p>

<p>Como ejemplo, el siguiente programa muestra una barra.</p>

<p>Tiene un handler que escucha si se ha pulsado el botón del ratón principal (el izquierdo). De ser así, va guardando la posición en la que se encuentra el ratón en la variable lastX. Después, añade un listener que está pendiente escuchando si el ratón se esta moviendo o no. 
Si no se mueve, no hace nada, pero en caso de que sí, calcula la nueva posición y se la asigna al div.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>Drag the bar to change its width:<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">style=</span><span class="s">"background: orange; width: 60px; height: 20px"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
  <span class="kd">let</span> <span class="nx">lastX</span><span class="p">;</span> <span class="c1">// Tracks the last observed mouse X position</span>
  <span class="kd">let</span> <span class="nx">bar</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">div</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">bar</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousedown</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">lastX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousemove</span><span class="dl">"</span><span class="p">,</span> <span class="nx">moved</span><span class="p">);</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// Prevent selection</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">moved</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">buttons</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousemove</span><span class="dl">"</span><span class="p">,</span> <span class="nx">moved</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">dist</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">lastX</span><span class="p">;</span>
      <span class="kd">let</span> <span class="nx">newWidth</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">bar</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">+</span> <span class="nx">dist</span><span class="p">);</span>
      <span class="nx">bar</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">newWidth</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">px</span><span class="dl">"</span><span class="p">;</span>
      <span class="nx">lastX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<p><img src="/p3-t2-handling-events-b3cl0s3r/assets/img/captura2.png" alt="image" /></p>

<h3 id="eventos-touch">Eventos touch</h3>

<p>En una pantalla táctil, no podemos hacer tracking de los dedos de la persona. Además, cabe la posibilidad de tocar con varios dedos.</p>

<p>Tocar una pantalla táctical activa los eventos mousedown, mouseup y click. En algunos casos funciona bien, pero en el caso del rectángulo, por 
ejemplo, no sería lo ideal.</p>

<p>Existen eventos específicos: touchstart, touchmove y touchend, cuando se toca la pantalla, cuando tocas la pantalla y mueves el dedo y cuando dejas de tocar la pantalla.</p>

<p>Como la pantalla puede ser tocada por varios dedos, se tiene un array de puntos cada uno con sus propiedades clientX, clientY, pageX y pageY.</p>

<h3 id="eventos-de-scroll">Eventos de scroll</h3>

<p>Para los eventos de scroll, existe el evento de scroll. Se pueden usar para seguir lo que está leyendo la persona.</p>

<h3 id="eventos-de-focus">Eventos de focus</h3>

<p>Cuando un elemento gana focus, se lanza un evento de focus. Cuando lo pierde, un evento de blur.</p>

<p>A diferencia de los otros eventos, estos dos eventos no avisan al elemento padre de que un elemento hijo ha ganado o perdido
el focus.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>Name: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">data-help=</span><span class="s">"Your full name"</span><span class="nt">&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>Age: <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">data-help=</span><span class="s">"Your age in years"</span><span class="nt">&gt;&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">"help"</span><span class="nt">&gt;&lt;/p&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="kd">let</span> <span class="nx">help</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#help</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">fields</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">field</span> <span class="k">of</span> <span class="nb">Array</span><span class="p">.</span><span class="k">from</span><span class="p">(</span><span class="nx">fields</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">field</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">focus</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">data-help</span><span class="dl">"</span><span class="p">);</span>
      <span class="nx">help</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">text</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">field</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">blur</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">help</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<h3 id="evento-de-load">Evento de load</h3>

<p>Cuando una página acaba de cargarse, se lanza un evento de load. Esto se usa frecuentemente para establecer la inicialización de una acción que requiere que la página se encuentre totalmente cargada.</p>

<p>Recordar que el contenido de las etiquetas script se ejecutan tan pronto como se encuentren. Elementos como scripts e imágenes tienen también
un evento de load, para indicar que los ficheros a los que referencian han sido cargados.</p>

<p>Cuando una página se cierra, se lanza un evento “beforeunload”. El principal uso es prevenir de que un usuario pierda su progreso.</p>

<p>Si evitas el comportamiento por defecto y cambias la propiedad returnValue del evento del objeto a una cadena, el navegador mostrará que al usuario un dialogo preguntando si quieren salir realmente. Este diálogo podría incluir tu cadena, pero como algunas páginas maliciosas han usado estos diálogos para confundir a la gente para que se queden en su página, la mayoría de los navegadores no lo muestran.</p>

<h3 id="eventos-y-el-event-loop">Eventos y el event loop</h3>

<p>Los handlers del navegador se comportan como otras notificaciones asíncronas.</p>

<p>Se programan para que ocurra un evento, pero debe esperar por otros scripts que están corriendo para acabar antes de que puedan ejecutarse.</p>

<p>El hecho de que un evento pueda ser procesado solo cuando nada más esta corriendo significa que, si el bucle de eventos está con otra tarea, cualquier interacción con la página se retrasará hasta que haya tiempo para procesarla. Por eso, si programas demasiadas tareas, con tareas muy pesadas o monton de tareas cortas, la página se volverá lenta y pesada de usar.</p>

<p>Para casos donde realmente quieres cosas que consuman tiempo en background sin congelar la página, los navegadores ofrecen algo llamado web workers. Un worker es un proceso en javascript que corre en paralelo al script principal.</p>

<p>Para evitar problemas de concurrencia, los workers no comparten ni su ámbito global ni cualquier otro tipo de datos. Solo puedes comunicarte con ellos enviando y recibiendo mensajes.</p>

<h3 id="timers">Timers</h3>

<p>setTimeout es una función que programa que una función se ejecute después de un tiempo.</p>

<p>A veces, puedes necesitar cancelar una función que has programado. Esto se puede hacer guardando en una variable
el valor retornado por setTimeout y llamando clearTimeout sobre él.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="kd">let</span> <span class="nx">bombTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">BOOM!</span><span class="dl">"</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">500</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 50% chance</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Defused.</span><span class="dl">"</span><span class="p">);</span>
  <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">bombTimer</span><span class="p">);</span>
<span class="p">}</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>Alternativamente, existe setInterval() y clearInterval (que funcionan exactamente de la misma manera (timers que ejecutan una tarea cada X segundos)
y requestAnimationFrame() y cancelAnimationFrame()</p>

<h3 id="debouncing-rebote">Debouncing (rebote)</h3>

<p>Algunos eventos tienen el potencial de dispararse muchas veces de manera repetida, como scroll y mousemove. Cuando los usas, hay que tener
cuidado con realizar tareas pesadas o la interacción empezará a ser lenta.</p>

<p>Si necesitas realizar algo no trivial, se puede utilizar setTimeOut() como función de debouncing. Esta serviría para asegurarte que la tarea no se repite con tanta frecuencia.</p>

<p>En este ejemplo, por ejemplo, mostramos el mensaje de Type mientras la persona teclea. Sin embargo, lo volveremos a mostrar únicamente cuando haya una pausa grande y se vuelva a escribir y así se evita que aparezca por cada tecla el mensaje “type”.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">textarea</span><span class="o">&gt;</span><span class="nx">Type</span> <span class="nx">something</span> <span class="nx">here</span><span class="p">...</span><span class="o">&lt;</span><span class="sr">/textarea</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="kd">let</span> <span class="nx">textarea</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">textarea</span><span class="dl">"</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">timeout</span><span class="p">;</span>
  <span class="nx">textarea</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">input</span><span class="dl">"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timeout</span><span class="p">);</span>
    <span class="nx">timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Typed!</span><span class="dl">"</span><span class="p">),</span> <span class="mi">500</span><span class="p">);</span>
  <span class="p">});</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>Un patrón ligeramente distinto lo tendríamos cuando movemos el ratón.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
  <span class="kd">let</span> <span class="nx">scheduled</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">mousemove</span><span class="dl">"</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">scheduled</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span>
          <span class="s2">`Mouse at </span><span class="p">${</span><span class="nx">scheduled</span><span class="p">.</span><span class="nx">pageX</span><span class="p">}</span><span class="s2">, </span><span class="p">${</span><span class="nx">scheduled</span><span class="p">.</span><span class="nx">pageY</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
        <span class="nx">scheduled</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">},</span> <span class="mi">250</span><span class="p">);</span><span class="o">*</span><span class="sr">/</span><span class="err">
</span>    <span class="p">}</span>
    <span class="nx">scheduled</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">});</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>En este ejemplo, cada vez que movemos el ratón mostramos su posición. Pero solo actualizamos el DOM cada 250ms para evitar que el evento
se dispare demasiadas veces.</p>

<h2 id="jekyll">Jekyll</h2>

<p>Después de instalar jekyll, para crear un nuevo proyecto debemos de hacer:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  jekyll new &lt;nombreproyecto&gt;
</code></pre></div></div>

<p>Ahora, debemos de hacer un build de la web con:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll  build <span class="nt">-b</span> <span class="s2">"p3-t2-handling-events-b3cl0s3r"</span>
</code></pre></div></div>
<p>Modificamos el package.json y añadimos un nuevo script, para automatizar el despliegue en github pages:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"deploy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gh-pages -d _site"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Finalmente, hacemos un deploy en github:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run deploy
</code></pre></div></div>

<p>Si accedemos a https://ull-esit-dsi-1920.github.io/p3-t2-handling-events-b3cl0s3r/ podremos ver la web desplegada.</p>

<p><img src="/p3-t2-handling-events-b3cl0s3r/assets/img/captura3.png" alt="image" /></p>

<p>Asimismo, para configurar nuestra web, como el título y la descripción, debemos modificar el fichero _config.yml que sea crea con jekyll.</p>

<p>Ahí podemos añadir variables que luego podemos utilizar dentro de la página utilizando el lenguaje Liquid, un lenguaje de plantillas. Esta nos puede ayudar para definir como se construirá nuestra web estática.</p>

<h3 id="htmlproofer-y-travis">HTMLProofer y travis</h3>

<p>HTMLProofer es un set de tests que valida el output de un HTML. Estos checks comprueban que las referencias de las imágenes son legitimas, que tienen las etiquetas alt, que los links internos funcionan… entre otros.</p>

<p>El mayor uso de HTMLProofer es para integración continua, para testear la calidad de un documento html.</p>

<p><img src="/p3-t2-handling-events-b3cl0s3r/assets/img/captura4.png" alt="image" /></p>

<p>En esta imagen, se ve como funciona htmlproofer. Saca un montón de errores de links que no tienen referencia. Esto se debe porque corrí el programa dentro de la ruta _site/jekyll/update/2020/03/05 en lugar de _site y, de esta manera, no detecta las direcciones del href.</p>

<p>Sin embargo, si lo ejecutamos sobre _site:</p>

<p><img src="/p3-t2-handling-events-b3cl0s3r/assets/img/captura5.png" alt="image" /></p>

<p>Sale todo correcto.</p>

<p>Podemos automatizar esta prueba con un Rakefile de la siguiente manera:</p>

<pre><code class="language-rakefile">require 'html-proofer'

task :test do
  sh "bundle exec jekyll build"
  options = { :assume_extension =&gt; true }
  HTMLProofer.check_directory("./_site", options).run
end
</code></pre>

<p>Así, solo tenemos que ejecutar rake test.</p>

  </div><a class="u-url" href="/p3-t2-handling-events-b3cl0s3r/jekyll/update/2020/03/05/informe.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/p3-t2-handling-events-b3cl0s3r/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">p3-t2-handling-events-b3cl0s3r</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">p3-t2-handling-events-b3cl0s3r</li><li><a class="u-email" href="mailto:alu0101045788@ull.edu.es">alu0101045788@ull.edu.es</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/p3-t2-handling-events-b3cl0s3r/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/p3-t2-handling-events-b3cl0s3r/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Página para la práctica 3 de DSI.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
